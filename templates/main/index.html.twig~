{% extends 'layouts/layout.html.twig' %}

{% block title %}Page d'accueil{% endblock %}

{% block content %}
    <div class="columns is-centered">
        <div class="column is-8">
            <div class="box">

                <h2 class="title">Bienvenue sur la page d'accueil</h2>
                {#                <p>Ceci est la zone de contenu avec un fond jaune pastel pour la différencier.</p> #}
                {#                <p>Ajoute ici tes composants, listes ou formulaires à ton goût.</p> #}


                <div class="box">


                    <table class="table">
                        <thead>
                        <tr class="">
                            <th>Nom de la sortie</th>
                            <th>Date de la sortie</th>
                            <th>Cloture</th>
                            <th>Etat</th>
                            <th>Organisateur</th>
                            <th>Actions</th>
                        </tr>
                        </thead>
                        <tbody>
                        <div class="box">
                            {{ form_start(filterForm) }}
                            {{ form_widget(filterForm) }}
                            {{ form_end(filterForm) }}
                        </div>


                        {% for sortie in sorties %}
                        <tr>
                            <td>{{ sortie.nom }}</td>
                            <td>{{ sortie.dateHeureDebut | date('d/m/Y') }}</td>
                            <td>{{ sortie.dateLimiteInscription | date('d/m/Y') }}</td>
                            <td>{{ sortie.etat.libelle }}</td>
                            <td> {% if app.user is not null and sortie.organisateur.id == app.user.id %}
                                    <a href="{{ path('app_profil') }}">{{ sortie.organisateur.nom }}</a>
                                {% else %}
                                    <a href="{{ path('app_profil_id', {'id': sortie.organisateur.id}) }}">{{ sortie.organisateur.nom }}</a>
                                {% endif %}</td>
                            <td>
                                <div class="control field is-grouped is-grouped-right">
                                    <button class="button is-primary is-normal">
                                        <a href="{{ path('app_detailSortie', {'id': sortie.id}) }}">
                                            Afficher
                                        </a>
                                    </button>
                                </div>
                                {% if app.user == sortie.organisateur and sortie.etat.libelle=='Créée' %}
                                    {#                                <a href="">Publier</a> #}
                                    <div class="control field is-grouped is-grouped-right">
                                        <button class="button is-primary is-normal">
                                            <a href="">
                                                Publier&nbsp;
                                            </a>
                                        </button>
                                    </div>
                                {% endif %}
                                {% if app.user == sortie.organisateur and sortie.etat.libelle=='Ouverte' %}
                                    <a href="">Annuler</a>
                                {% endif %}

                            </td>

                            {% endfor %}
                        </tbody>

                    </table>
                </div>

            </div>
        </div>
    </div>

{% endblock %}
